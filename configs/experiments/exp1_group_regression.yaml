defaults: "../base.yaml"

name: "exp1_group_regression"
task: "regression"

data:
  type: "synthetic"
  seed: 20251108
  n: 200
  p: 500
  G: 25
  group_sizes:
    # Strong backbones (groups 0-2)
    - 36
    - 32
    - 28
    # Heterogeneous weak/moderate groups (3-10)
    - 26
    - 24
    - 24
    - 22
    - 22
    - 20
    - 20
    - 18
    # Structured-but-diffuse groups (11-18)
    - 24
    - 22
    - 20
    - 20
    - 18
    - 18
    - 18
    - 16
    - 16
    # Empty controls (19-24) -- never referenced in blueprint
    - 12
    - 12
    - 12
    - 10
    - 10
  correlation:
    type: "group_block"
    rho_in: 0.65
    rho_out: 0.05
  signal:
    blueprint:
      - label: "strong_backbone"
        groups: [0, 1, 2]
        components:
          - name: "spikes"
            distribution: "constant"
            count: 2
            value: 2.3
            sign: "positive"
            tag: "strong"
          - name: "structured_core"
            distribution: "uniform"
            count_range: [8, 10]
            low: 0.35
            high: 0.55
            sign: "mixed"
            tag: "moderate"
      - label: "weak_groups"
        groups: [3, 4, 5, 6, 7, 8, 9, 10]
        components:
          - name: "diffuse"
            distribution: "uniform"
            fraction_range: [0.2, 0.4]
            low: 0.2
            high: 0.35
            sign: "mixed"
            tag: "weak"
      - label: "sparse_background"
        groups: [11, 12, 13, 14, 15, 16, 17, 18]
        components:
          - name: "rare_singletons"
            distribution: "uniform"
            fraction_range: [0.05, 0.1]
            low: 0.2
            high: 0.4
            sign: "mixed"
            tag: "weak"
      - label: "empty_controls"
        groups: [19, 20, 21, 22, 23, 24]
        components: []
  noise_sigma: 0.8

experiments:
  repeats: 3
  coverage_level: 0.9
  focus_metrics:
    predictive: ["RMSE", "PredictiveLogLikelihood", "MLPD"]
    selection: ["AUC-PR", "F1"]
    shrinkage: ["MeanEffectiveNonzeros", "EffectiveDoF"]
  group_metrics:
    tags:
      - label: "strong"
        tag: "strong"
      - label: "weak"
        tag: "weak"
    requested: ["group_tpr", "group_fdr", "group_accuracy"]
  diagnostics:
    shrinkage_plots:
      - "phi_violin"
      - "group_vs_feature_shrinkage"
    posterior_overlays:
      - "beta_by_group"
    selection_summary: "tagged_groups"

splits:
  outer:
    n_splits: 5
    n_repeats: 1
    shuffle: true
  inner:
    n_splits: 5
    shuffle: true
